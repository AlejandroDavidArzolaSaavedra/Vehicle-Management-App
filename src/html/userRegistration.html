<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>userRegistration</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <!--FONTAWESOME-->
        <script src="https://kit.fontawesome.com/ff006d44e4.js" crossorigin="anonymous"></script>

        <link rel="stylesheet" href="../css/styles.css">
        <link rel="stylesheet" href="../css/header.css">
        <link rel="stylesheet" href="../css/form.css">
        <link rel="stylesheet" href="../css/footer.css">
        <link rel="stylesheet" href="../css/headerMobile.css">
        <script src="../js/loadTemplate.js"></script>
        <script>

            document.addEventListener('DOMContentLoaded', init);

            function init() {
                //modo = 1 header oculto actualmente
                let modo = 0;
                fetch("../html/templates/components/headerMobile.html")
                    .then((res) => {
                        return res.text();
                    })
                    .then((text) => {
                        document.getElementById("headerMobile").innerHTML = text;
                        document.getElementById("buttonToggleHeaderMobile").addEventListener("click", ()=>{
                            const sidebar = document.getElementById("header")
                            const indexBody = document.getElementById("indexBody")

                            if(modo === 1){
                                sidebar.classList.add("headerDisplayoff")
                                indexBody.classList.remove("displayoff")
                                modo = 0;
                            }else{
                                indexBody.classList.add("displayoff")
                                sidebar.classList.remove("headerDisplayoff")
                                modo = 1;
                            }
                        })
                    })
                loadTemplate("../html/templates/loggedOutHeader.html", "header")
                fetch("../html/templates/formUser.html")
                    .then((res) => {
                    return res.text();
                })
                    .then((text) => {
                    document.getElementById("indexBody").innerHTML = text;
                    document.getElementById("formUserRegistration").addEventListener("submit",(e) => {
                        console.log("me han pulsado")
                        e.preventDefault();
                        const passInput = document.getElementById("pass")
                        const passConfitmInput = document.getElementById("passConfirm")
                        if(passInput.value !== passConfitmInput.value){
                            passInput // invalid
                                .setCustomValidity('Must match !')
                        } else {
                            passInput // invalid
                                .setCustomValidity('')
                            console.log("se ha enviado correctamente");
                        }
                        passInput.reportValidity()
                    })
                })
                loadTemplate("../html/templates/footer.html", "footer")
            }
        </script>


    </head>
    <body>
        <div id="headerMobile"></div>
        <div id="bodyMain">
            <header id="header" class="headerDisplayoff"></header>

            <div id="indexBody" class="bodyContainer"></div>

            <footer id="footer"></footer>
        </div>
    </body>
</html>